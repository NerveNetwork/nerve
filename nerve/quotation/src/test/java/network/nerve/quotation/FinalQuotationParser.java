package network.nerve.quotation;

import io.nuls.base.data.Block;
import io.nuls.base.data.Transaction;
import io.nuls.core.crypto.HexUtil;
import io.nuls.core.exception.NulsException;
import network.nerve.quotation.model.txdata.Prices;
import network.nerve.quotation.model.txdata.Quotation;
import network.nerve.quotation.util.CommonUtil;
import org.junit.Test;

public class FinalQuotationParser {
    public static void main(String[] args) throws NulsException {
//        String blockHex = "b42cd88648b22ce857f944e160fe11aef54237c1c8666b3a16bb18a60517b932185f831e6fcbaad2a318d0fa00d2ef4959e76b74e223728596f9d2b8926b1dabfe85976493a0e5010200000034a638cd000400f88597640400010001003c640020d22276577a174aa49d5c2882cc69e9fe2baebef571c79d0accc81da0f8a7d1a42102b42a0023aa38e088ffc0884d78ea638b9438362f15c610865dfbed9708347750473045022100c50ee7ac5d641f82b4523d71103dbb3fc68a9fa6b20ce6fcc3de576e977dd7f3022063e1b49e731f1ae629d68253d438db3778675ccdeec77381ce52329cdc6ba44b0100fe8597640000020000001f008083976400fd2e021e084254432d55534454afcfbd43b2d3dd400843524f2d555344548716d9cef753ad3f09555344432d5553445425a71bcd36fcef3f084f4b422d5553445452b81e85eb614640085245492d55534454ca07352a0d88963f084f4b542d55534454c3f5285c8f022e400f4e5654555344544e4c502d5553445448e17a1436d3e24008424e422d55534454aaf1d24de2926d40114e5654424e4243616b654c502d555344548066100780711341084f4e452d555344543d8f9b2b94969f3f124e565448555344484d44584c502d55534454afa104e725400142084441492d55534454a94c7323131df03f0846544d2d555344541d2809ecde08d43f084243482d55534454a245b6f37dca6a40084e56542d55534454c425c79dd2c1823f0a4d455449532d55534454e8e2a9260c9d3440094b4156412d55534454706c2c17e041f13f09415641582d55534454384a5e9d63082a4009494f54582d55534454fc61b62aaafa943f085041582d55534454207bbdfbe3bd0d40124e5654455448554e4956324c502d55534454e60297b394102f41085452582d55534454fc010f0c207cb23f09455448572d55534454d42b6519e2580040094e554c532d555344541692e587bef9cb3f09555344542d55534454000000000000f03f0748542d5553445432e6ae25e48305400a4d415449432d5553445439d62027a7f1e43f084554482d5553445494affce07d499d40084b43532d5553445439b4c876bedf1a40094b4c41592d55534454b0fbf10b6d08c63f0000";
//        Block block = new Block();
//        block.parse(HexUtil.decode(blockHex),0);
//        Transaction tx = block.getTxs().get(1);
//        Prices prices = CommonUtil.getInstance(tx.getTxData(), Prices.class);
//        System.out.println(prices);

        String blockHex = "4c76f430aa191fb510620f3d498d29c36123255980e8edb061b7ceec372c2efb475296ff4fa4f086699b667a1c34ae90342abcf93655c975085a3f3111c5d7c7f48397648e9fe50102000000346538cd000400f08397640300010001003c640020d22276577a174aa49d5c2882cc69e9fe2baebef571c79d0accc81da0f8a7d1a42102b42a0023aa38e088ffc0884d78ea638b9438362f15c610865dfbed9708347750473045022100dc9d6c7643a6e0ecba0e458de28778b7a178956b4f037f6debddf89f91346e4d02200d45aecdf394d6fc53f5f9615bca86e9e5fe3205f82a0d1ccbd9bb86d360813a0100f48397640000020000001e00f383976400fd4a0217050001b71b20e6ec5850eaa59b78fc806d560d0e89446101fd2e021e084254432d55534454d3c8007346d4dd400843524f2d5553445474b515fbcbeead3f09555344432d5553445436b01366f3fbef3f084f4b422d55534454c3f5285c8f624640085245492d55534454666a12bc218d963f084f4b542d555344540000000000002e400f4e5654555344544e4c502d5553445448e17a1436d3e24008424e422d55534454df4f8d976e936d40114e5654424e4243616b654c502d55534454d9b0a642dc711341084f4e452d55534454a1329b530b1d8a3f124e565448555344484d44584c502d55534454afa104e725400142084441492d555344548e9380a0f503f03f0846544d2d555344546a97a1b79906d43f084243482d555344543d0ad7a370cc6a40084e56542d5553445483177d0569c6823f0a4d455449532d555344549129bc57ef9d3440094b4156412d55534454704200f4242ef13f09415641582d55534454a4c7ef6dfa032a4009494f54582d55534454252d090e37f9943f085041582d55534454207bbdfbe3bd0d40124e5654455448554e4956324c502d555344547f68e6a947172f41085452582d55534454130ebdc5c37bb23f09455448572d55534454569fabadd85f0040094e554c532d555344546db9654d4dfecb3f09555344542d55534454000000000000f03f0748542d55534454dfe00b93a98205400a4d415449432d5553445408477f1e59efe43f084554482d555344540e5ba3b3ce4f9d40084b43532d555344548716d9cef7d31a40094b4c41592d55534454716db0892f07c63f00692103e2029ddf8c0150d8a689465223cdca94a0c84cdb581e39ac13ca41d279c24ff5463044022064dd77adc1880f6544d011b62bfae13e6a5249a3b712e8d9df503ca0051e56be02202ee2d012113a1f7e93c1e936a945fb9aa321fa97c9792a9e686616d47e085ea8";
        Block block = new Block();
        block.parse(HexUtil.decode(blockHex), 0);
        Transaction tx = block.getTxs().get(1);
        Quotation quotation = CommonUtil.getInstance(tx.getTxData(), Quotation.class);
        System.out.println(quotation);
    }

    @Test
    public void test() throws NulsException {
        byte[] txData = HexUtil.decode("1e084254432d55534454afcfbd43b2d3dd400843524f2d555344548716d9cef753ad3f09555344432d5553445425a71bcd36fcef3f084f4b422d5553445452b81e85eb614640085245492d55534454ca07352a0d88963f084f4b542d55534454c3f5285c8f022e400f4e5654555344544e4c502d5553445448e17a1436d3e24008424e422d55534454aaf1d24de2926d40114e5654424e4243616b654c502d555344548066100780711341084f4e452d555344543d8f9b2b94969f3f124e565448555344484d44584c502d55534454afa104e725400142084441492d55534454a94c7323131df03f0846544d2d555344541d2809ecde08d43f084243482d55534454a245b6f37dca6a40084e56542d55534454c425c79dd2c1823f0a4d455449532d55534454e8e2a9260c9d3440094b4156412d55534454706c2c17e041f13f09415641582d55534454384a5e9d63082a4009494f54582d55534454fc61b62aaafa943f085041582d55534454207bbdfbe3bd0d40124e5654455448554e4956324c502d55534454e60297b394102f41085452582d55534454fc010f0c207cb23f09455448572d55534454d42b6519e2580040094e554c532d555344541692e587bef9cb3f09555344542d55534454000000000000f03f0748542d5553445432e6ae25e48305400a4d415449432d5553445439d62027a7f1e43f084554482d5553445494affce07d499d40084b43532d5553445439b4c876bedf1a40094b4c41592d55534454b0fbf10b6d08c63f");
        Prices prices = CommonUtil.getInstance(txData, Prices.class);
        System.out.println(prices);
    }

    @Test
    public void test2() throws NulsException {
        byte[] txData = HexUtil.decode("170500015fe8190d72be92e24810dcd6cd6570482a96ac5501110107352d39322d313848e17a148eb4c840");
        Quotation quotation = CommonUtil.getInstance(txData, Quotation.class);
        System.out.println(quotation);
    }
}
