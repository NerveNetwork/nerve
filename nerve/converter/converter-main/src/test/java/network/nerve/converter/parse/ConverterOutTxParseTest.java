package network.nerve.converter.parse;

import io.nuls.base.data.Block;
import io.nuls.base.data.CoinData;
import io.nuls.base.data.Transaction;
import io.nuls.core.constant.TxType;
import io.nuls.core.crypto.HexUtil;
import io.nuls.core.exception.NulsException;
import network.nerve.converter.model.txdata.WithdrawalTxData;

public class ConverterOutTxParseTest {
    public static void main(String[] args) throws NulsException {
        crossIn(null);
    }

    public static void crossIn(String[] args) throws NulsException {
        String blockHex = "32ad9b53c8c9cc566f5f4c7cdf6a0f89701c7e48c9eb3b1e6817209f5e0a017f990356fc61485512c3ba5492c0a1c9b1b47159d46e03c6abba2ab474b873172c5614096538a1ee020200000034fb36270013004a1409650700010001003c6400209f3409088c62f34235945e8a14c7a4294931bfc56ceda2396182bbc239ebf9912102ae22c8f0f43081d82fcca1eae4488992cdb0caa9c902ba7cbfa0eacc1c6312f0473045022100bc254518d94143e4d80676e9df83525d0028d01c80f21d90c805c1ed43251f9602207b6937cfb0be3ce28f269f0918835b997d8c584d05114bdd06ba755bdfe0503d010056140965000046000117090001c37c948cea7bc5472dfebcdf4a69603304d0c73609000100a0860100000000000000000000000000000000000000000000000000000000000000000000000000002b00561409652436373937393832382d366637372d343662312d616364342d3461363265363838636338632d2a3078613937306361613531393039376364333339323864663261663631353239666565303066393438316500fd1601021709000186b416da9257f55bbd27b752eebea475439e446f09004b0011d58fb7b43734626d000000000000000000000000000000000000000000000008912cdea557930020001709000186b416da9257f55bbd27b752eebea475439e446f09000100a06f4917120000000000000000000000000000000000000000000000000000000809d9b8ade8d23ed600021709000129cfc6376255a78451eeb4b129ed8eacffa2feef09004b0011d58fb7b43734626d00000000000000000000000000000000000000000000000000000000000000170900018ec4cf3ee160b054e0abb6f5c8177b9ee56fa51e0900010000e947171200000000000000000000000000000000000000000000000000000000000000000000006a2102590edf33eaa3fa87803478a8253d1935367f6bf046be25278146057c18a50ccb473045022100a843e95d90fb06b463fc3941c200f7bfe8fdc574cacea0c3a911792094b18c3b02202ea4b3c421c9dc1710bc8d10ca03235c4f86289fb849175a333b322276b7ad0b";
        Block block = new Block();
        block.parse(HexUtil.decode(blockHex), 0);
        for (Transaction tx : block.getTxs()) {
            if (tx.getType() != TxType.WITHDRAWAL) {
                continue;
            }
            WithdrawalTxData txData = new WithdrawalTxData();
            txData.parse(tx.getTxData(), 0);
            CoinData coinData = tx.getCoinDataInstance();
            System.out.println(txData.getHeterogeneousAddress());
        }
    }

}
