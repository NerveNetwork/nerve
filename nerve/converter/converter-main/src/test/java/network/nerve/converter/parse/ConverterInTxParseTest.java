package network.nerve.converter.parse;

import io.nuls.base.data.Block;
import io.nuls.base.data.CoinData;
import io.nuls.base.data.Transaction;
import io.nuls.core.constant.TxType;
import io.nuls.core.crypto.HexUtil;
import io.nuls.core.exception.NulsException;
import network.nerve.converter.model.txdata.RechargeTxData;

public class ConverterInTxParseTest {
    public static void main(String[] args) throws NulsException {
        crossIn(null);
    }

    public static void crossIn(String[] args) throws NulsException {
        String blockHex = "ea9bcafd5dad574b890e87ab9c5cdda4d72647a37e27bf51782a556b99aa705421381b32416b7ad616668e0c749688aae8875ecee374d2b7ddd0519e34b6773607fa03659f1aec020200000034cf142700130001fa03650400010001003c640020403cc8ffd4474570e568935e223214863e5bd395177b7bec3ac0945bb1136d802103b9e15389e42e1fabf4694f8e9d2949dd82a461ed8563e1d3306b772248ae9206473045022100e73cf4e37211e9d47dac7de063c8a611bd0c693912b37e58aa3c5aa739c827930220659a4afdbf4fa136209dac38df125fa2fa04b00610b309d0ad13683758e0d529010007fa03650000020000002a008bf803652a307832653536336536643265386631323430313661666664366563343032393365353166323230396638904230786362356536643261313335663338333463613132346136366365306133626365313833373363653535646336643165643261313862363033633264316530303165004a307833383332333433363333363436323333326433373339333336363264333433393636333432643632333636353339326433393632333333373338333833303332363333393334333346000117090001e6da0a93f2ac0f396745215115fe359ae3dafc2f090002000000a40731af05000000000000000000000000000000000000000000000000000000000000000000fd1c042103b9e15389e42e1fabf4694f8e9d2949dd82a461ed8563e1d3306b772248ae920646304402200396410d29cf02fe708f3b9356c4825f4f68e5d4de034de58d7f9170d0acfc7902207ba6f60ba640d01e7985999e9e8e4814e520bceac60897039f9f4a7f944b0dbf210377d7261ed7ce92c1e29ce9b09b697274efbdc65ecbe18d7b011455399681d7de46304402206178aa98efb5832c342d44e1e6ea804dd3cf68be39931dff4df7e88c5b0ac56c02207a9d5d363270fc01560bf67fe2d17e6181b6be5710c7c17e51f3f0c10cd8c7592102a2edb535be21aa7fd4aa0748ae29e110e35783bc6a92fa7f417f3ffeeeec18cd46304402202866ba8cb40d873df7d365353ea73c81b37714deff1576ae97608a692e1bbbd7022060eac180a7a43fa47c6ca2ea0dbde84b04535302eb1cd17b3f17d7b0b7b245772102db1a62c168ac3e34d30c6e6beaef0918d39d448fe2a85aed24982e7368e2414d463044022004caf68f2b194fb57788b28a8e1e77a8705839faf9b5c90353854e694c8da05f02207f27c2eb3bc183e4fa9b8916f8102c81282ad942785aac6b4513f3d50f7a8101210308ad97a2bf08277be771fc5450b6a0fa26fbc6c1e57c402715b9135d5388594b473045022100ec34460e252bd35e7a2fb2c8fec6f8cea93211e27ec0147eb573cb703465db0102200f41f6311656d3664b9c657b37b1c1242474c14a79ec1b3adb6fc4d5feabf2a121021f9d9e1f867adb6754fe5d47d831605c7e205f02203341a9eb8ec2db393e4f3746304402203192272fc2c2609c0594dfcabe1724c11566916f147abfc12b8fdb0c899e777702207cb1e26b2ec488310119fbe27cee76c6ef47c86490e9ecfcd68deac30d4286d82103929732b37e41a5a37b35122002c068f596432f4b9438ba4ac2a85e7dd31c3df4473045022100f5d73914b75374e6fcb4c8d0ca886c708936d5f69fc21a33205ddae74cb114be02207de12c5aa7ed3df9667b2dac580b248ee8427e1e64d5feb6449a6bcc7b891df921035fe7599a7b39ad69fbd243aac7cfb93055f8f0827c6b08057874877cb890b8034630440220565264b99989ec7e5a318f3da16b61ed20b67ed50e888f1da19c879bbe704795022070d79dea5789da2fd4a826ada571e677e7585885d7846a1cb169e4443445afd42102ae22c8f0f43081d82fcca1eae4488992cdb0caa9c902ba7cbfa0eacc1c6312f046304402207b55fa3aab5aec88635ebdd058a9558d8a9bb50127c5b9518ff6b015a7095feb02203ce009231531b03849849f50a23c65289ea53601944ca92e0bb4b8a41bf5e2d32103ac396ab4bc360610058d04940c879e0da57ea1b4a541b75df6989a6c3d5081c946304402206c2f1f9c6de582ac74d1131cd089d71a12a4eb2cf149ab41188caae3ebc2e28502202476d305cc5d9e9db5ae617cffc88bbb84b378f1eac5a32bcc416979380b3c3f";
        Block block = new Block();
        block.parse(HexUtil.decode(blockHex), 0);
        for (Transaction tx : block.getTxs()) {
            if (tx.getType() != TxType.RECHARGE) {
                continue;
            }
            RechargeTxData txData = new RechargeTxData();
            txData.parse(tx.getTxData(), 0);
            CoinData coinData = tx.getCoinDataInstance();
            System.out.println(txData.getOriginalTxHash());
        }
    }

}
